(function(d,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof module&&module.exports?module.exports=a():d.IframeActionCommunicator=a()})(this,function(){var d=function(a){this.registeredActions={};this.$iFrame=null;this.parentInstance=!1;if(a)if(this.$iFrame=document.getElementById(a))this.parentInstance=!0;else return console.error(this.constructor.name+": Iframe with '"+a+"' id wasn't founded");this.initListener()};d.prototype.initListener=function(){var a=this,b=window.addEventListener?
"addEventListener":"attachEvent";(0,window[b])("attachEvent"===b?"onmessage":"message",function(c){if(c.source!==window){try{var b=JSON.parse(c.data)}catch(e){b=!1}c=b;b=c.constructor===Object?c.action:c;if(!b)return console.error(a.constructor.name+": Action mustn't be empty. Please, pass action like a string or like an object in key 'action'");if(a.registeredActions[b]){if(c.constructor===Object)return a.registeredActions[c.action](c.data);if("string"===typeof c)return a.registeredActions[b]()}else console.error(a.constructor.name+
": Any handler doesn't subscribe on '"+b+"' action")}},!1)};d.prototype.send=function(a){if(!a||"string"!==typeof a&&a.constructor!==Object)return console.error(this.constructor.name+": post argument doesn't must empty and type me be 'string' or 'object'");try{var b=JSON.stringify(a)}catch(c){b=!1}a=b;this.parentInstance?this.$iFrame.contentWindow.postMessage(a,"*"):window.parent.postMessage(a,"*")};d.prototype.on=function(a,b){this.registeredActions[a]=b};return d});